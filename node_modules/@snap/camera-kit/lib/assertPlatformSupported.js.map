{"version":3,"file":"assertPlatformSupported.js","sourceRoot":"","sources":["../src/assertPlatformSupported.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,qBAAqB,CAAC;AAC7C,OAAO,EAAE,yBAAyB,EAAE,MAAM,eAAe,CAAC;AAE1D,MAAM,cAAc,GAAG,IAAI,CAAC;AAE5B;;;;GAIG;AACH,MAAM,UAAU,uBAAuB;IACnC,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAChD,MAAM,YAAY,GAAG,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;IAC/E,MAAM,cAAc,GAAG,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,YAAY,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;IAEjF,MAAM,CACF,CAAC,CAAC,YAAY,EACd,yBAAyB,CACrB,wGAAwG,CAC3G,CACJ,CAAC;IAEF,4EAA4E;IAC5E,0GAA0G;IAC1G,2GAA2G;IAC3G,MAAM,CACF,cAAc,IAAI,cAAc,EAChC,yBAAyB;IACrB,mCAAmC;IACnC,sFAAsF,cAAc,+CAA+C,cAAc,GAAG,CACvK,CACJ,CAAC;AACN,CAAC","sourcesContent":["import { assert } from \"./common/assertions\";\nimport { platformNotSupportedError } from \"./namedErrors\";\n\nconst minTextureSize = 1024;\n\n/**\n * Assert that the current platform supports the necessary WebGL features.\n * Specifically, it checks for WebGL or WebGL2 support and ensures that\n * the maximum texture size is at least 1024.\n */\nexport function assertPlatformSupported() {\n    const canvas = document.createElement(\"canvas\");\n    const webglContext = canvas.getContext(\"webgl2\") || canvas.getContext(\"webgl\");\n    const maxTextureSize = webglContext?.getParameter(webglContext.MAX_TEXTURE_SIZE);\n\n    assert(\n        !!webglContext,\n        platformNotSupportedError(\n            \"Camera Kit cannot be bootstrapped because the browser does not support WebGL canvas rendering context.\"\n        )\n    );\n\n    // Assert that the maximum texture size supported by WebGL is at least 1024.\n    // This is based on the information available at https://web3dsurvey.com/webgl/parameters/MAX_TEXTURE_SIZE\n    // and ensures that the application avoids future errors due to incompatibility with smaller texture sizes.\n    assert(\n        maxTextureSize >= minTextureSize,\n        platformNotSupportedError(\n            // eslint-disable-next-line max-len\n            `Camera Kit cannot be bootstrapped because this browser's WebGL MAX_TEXTURE_SIZE is ${maxTextureSize}, which is below the minimum requirement of ${minTextureSize}.`\n        )\n    );\n}\n"]}